<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/all.min.js"></script>
    <style>
        :root {
            --primary-color: white;
            --sidebar-width: 240px;
            --header-height: 60px;
            --border-radius: 8px;
            --bg-color: #f5f7fb;
            --card-bg: #ffffff;
            --border-color: #e0e6ed;
            --text-color: #333;
            --muted-text: #718096;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Segoe UI", Arial, sans-serif;
        }

        body {
            background-color: #f0f2f5;
            color: #333;
        }
        header {
            position: fixed;
            top: 0;
            left: var(--sidebar-width);
            right: 0;
            height: var(--header-height);
            background-color: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            z-index: 10;
        }.patient-table {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        
        .search-bar {
            display: flex;
            align-items: center;
            background-color: var(--bg-color);
            border-radius: 4px;
            padding: 8px 12px;
            width: 300px;
        }
        
        .search-bar input {
            border: none;
            background: transparent;
            width: 100%;
            padding: 0 8px;
            outline: none;
        }

         body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 32px;
            color: #333;
            margin-bottom: 10px;
        }

        .breadcrumb {
            color: #666;
            font-size: 14px;
        }

        .breadcrumb span {
            margin: 0 10px;
        }

        /* Patient List Table */
        .patient-table {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .table-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .table-controls {
            display: flex;
            gap: 10px;
        }

        .chart-btn {
            padding: 5px 10px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .chart-btn:hover {
            background: #f0f0f0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        .disease-tag {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .disease-influenza {
            background: #e3f2fd;
            color: #1976d2;
        }

        .disease-asthma {
            background: #fff3e0;
            color: #f57c00;
        }

        .disease-diabetes {
            background: #e8f5e8;
            color: #2e7d32;
        }

        .disease-jaundice {
            background: #fce4ec;
            color: #c2185b;
        }

        .disease-malaria {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .disease-typhoid {
            background: #e0f2f1;
            color: #00695c;
        }

        .disease-hepatitis {
            background: #fff8e1;
            color: #f9a825;
        }

        .disease-other {
            background: #f5f5f5;
            color: #666;
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .btn-edit, .btn-delete {
            padding: 5px 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .btn-edit {
            background: #4caf50;
            color: white;
        }

        .btn-edit:hover {
            background: #45a049;
        }

        .btn-delete {
            background: #f44336;
            color: white;
        }

        .btn-delete:hover {
            background: #da190b;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .error {
            background: #ffebee;
            color: #c62828;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }


/*
        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 150px;
            background-color: #fff;
            border-right: 1px solid #e0e0e0;
        }

        .main-content {
            flex: 1;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        

        .breadcrumb {
            display: flex;
            align-items: center;
            color: #888;
        }

        .breadcrumb a {
            color: #888;
            text-decoration: none;
        }*/
        .user-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .language-selector, .notifications, .messages, .user-profile {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .badge {
            position: relative;
        }
        
        .badge::after {
            content: attr(data-count);
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #f56565;
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }
        
       /* .sidebar {
            position: fixed;
            top: 0px;
            left: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background-color: var(--card-bg);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            height: 100%;
        }*/
        .sidebar {
    position: fixed;
    top: 0;
    left: 0;
    width: var(--sidebar-width);
    /* Calculate height to stop just before footer */
    height: calc(100vh - 52px); /* 52px is the footer height */
    background-color: var(--card-bg);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    z-index: 1000;
    overflow-y: auto;
}
        
        .logo {
            height: var(--header-height);
            padding: 10px 20px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }
        
        .logo img {
            height: 35px;
        }
        
        .logo span {
            font-size: 18px;
            font-weight: 600;
            margin-left: 10px;
            color: var(--primary-color);
        }
        
        .user-profile-sidebar {
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }
        
        .avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .user-info {
            text-align: center;
        }
        
        .user-info h3 {
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .user-info p {
            color: var(--muted-text);
            font-size: 14px;
        }
        
        .sidebar-menu {
            padding: 20px 0;
            flex: 1;
            overflow-y: auto;
            justify-content: space-between;
            scroll-behavior: smooth;
            

        }
        
        .menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            color: var(--text-color);
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }
        
        .menu-item.active {
            color:  #4680FF;
            ;
            background-color: rgba(83, 104, 245, 0.1);
            position: relative;
        }
        
        .menu-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background-color: var(--primary-color);
        }
        
        .menu-item i {
            width: 20px;
            margin-right: 10px;
        }
        
        .menu-item span {
            flex: 1;
        }
        
        .menu-item .badge-count {
            background-color: var(--primary-color);
            color: white;
            border-radius: 999px;
            padding: 2px 8px;
            font-size: 12px;
        }
        
        .menu-item .arrow {
            font-size: 10px;
            transition: transform 0.2s;
        }
        
        .menu-item.expanded .arrow {
            transform: rotate(90deg);
        }
        
        .main-content {
            margin-left: var(--sidebar-width);
            margin-top: var(--header-height);
            padding: 20px;
        }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .page-header h1 {
            font-size: 24px;
            font-weight: 600;
            
            
            
        }
        h1{
            font-size: 50px;            
            padding: 10px;
            margin-bottom: 30px;
        }
        .breadcrumb {
            display: flex;
            align-items: center;
            color: var(--muted-text);
            font-size: 16px;
            position: relative;
            left:79.3%;
            right:69%;
            bottom:-81%;
            transform: translateY(-80px); /* Negative moves it up */
            top:-19%;
            width: 220px;
            padding: 10px;
            margin-bottom: -40px;




                        /* Button */





            background: rgba(220, 208, 208, 0.3);
            border-radius: 50px;

        }
        
        /* Main Container */
            .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
            }
            
        
        .top-row {
            display: grid;
            grid-template-columns: 1fr 1fr 2fr;
            gap: 20px;
        }

        .breadcrumb a {
            margin: 0 8px;
            font-size: 16px;
            text-decoration: none;
            color: #666;
        }
        

        .breadcrumb span {
            margin: 0 8px;
            color: #999;
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            padding: 15px;
            /*position: relative;*/
            /*new add*/
            margin-bottom: 15px;
            margin-left: -5px;
        }
        .card1 {
           /* background-color: var(--card-bg);*/
            border-radius: var(--border-radius);
           /* box-shadow: 0 2px 5px rgba(0,0,0,0.05);*/
            padding: 15px;
            /*position: relative;*/
            /*new add*/
            margin-bottom: 15px;
        }

        .card2 {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            padding: 15px;
            /*position: relative;*/
            /*new add*/
            margin-bottom: -5px;
            margin-left: -5px;
        }
        
                    /* Small Card Styles */
            .small-card {
            display: flex;
            flex-direction: column;
            }


        .grid-con {
        display: grid;
        grid-template-columns: repeat(5, 1fr); /* Creates 3 columns with equal width */
        gap: 1%; /* Adds 10px gap between grid items */
    }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
        }
        
        .card-tools {
            display: flex;
            gap: 10px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #22c55e;
        }
        
        .stat-value.blue {
            color: #3b82f6;
        }
        
        .stat-value.orange {
            color: #f59e0b;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-bar-fill {
            height: 100%;
            border-radius: 4px;
        }
        
        .progress-bar-fill.green {
            background-color: #22c55e;
            width: 65%;
        }
        
        .progress-bar-fill.blue {
            background-color: #3b82f6;
            width: 75%;
        }
        
        .progress-bar-fill.orange {
            background-color: #f59e0b;
            width: 85%;
        }
        
        .chart-container {
            margin-top: 15px;
            height: 80px;
        }
        /*new add*/
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
           /* margin-bottom: 5px; */
            
    }
    .cards-container1 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
           /* margin-bottom: 5px; */
            
    }
        .card-full-width {
            grid-column: span 3;
        }
        
        .chart-card {
            height: 250px;
        }
        
        .growth-stats {
            display: flex;
            gap: 15px;
        }
        
        .growth-stat {
            flex: 1;
        }
        
        .growth-label {
            font-size: 14px;
            color: var(--muted-text);
            margin-bottom: 5px;
        }
        
        .growth-value {
            font-size: 16px;
            font-weight: 600;
        }
        
        .stat-change {
            font-size: 12px;
            margin-top: 5px;
        }
        
        .stat-change.positive {
            color: #22c55e;
        }
        
        .stat-change.negative {
            color: #ef4444;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }
        .table-card {
    padding: 15px;
}
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        th {
            font-weight: 600;
            color: var(--muted-text);
        }
        
        .status-pill {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-pill.diabetes {
            background-color: #c4f1de;
            color: #0f766e;
        }
        
        .status-pill.cardiac {
            background-color: #fed7aa;
            color: #9a3412;
        }
        
        .status-pill.anomalia {
            background-color: #a7f3d0;
            color: #065f46;
        }
        
        .status-pill.jaundice {
            background-color: #fecaca;
            color: #b91c1c;
        }
        
        .status-pill.leptospirosis {
            background-color: #bae6fd;
            color: #0369a1;
        }
        
        .status-pill.hepatitis {
            background-color: #fed7aa;
            color: #9a3412;
        }
        
        .status-pill.typhoid {
            background-color: #c1e1c1;
            color: #166534;
        }
        
        .status-pill.malaria {
            background-color: #fecaca;
            color: #b91c1c;
        }
        
        .action-button {
            padding: 6px;
            border-radius: 4px;
            background-color: #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .action-button:hover {
            background-color: #cbd5e1;
        }
        
        .action-button.edit {
            color: #059669;
        }
        
        .action-button.delete {
            color: #dc2626;
        }
        
       
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 0px;
        }

        .stats-grid .card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .survey-card {
            grid-row: span 2;
            margin-bottom: 15px;
        }

       

.metrics-row {
    display: grid
;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
}

.metric-card {
    padding: 20px;
}

.metric-header {
    display: flex
;
    justify-content: space-between;
    margin-bottom: 15px;
}

        .stats-card {
            position: relative;
        }

        .stats-card h3 {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 15px;
        }

        .stats-card .number {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2e9e5b;
        }

        .stats-card .progress-bar {
            height: 6px;
            background-color: #e0e0e0;
            border-radius: 3px;
            margin-bottom: 5px;
        }

        .stats-card .progress {
            height: 100%;
            border-radius: 3px;
        }

        .stats-card .progress.green {
            background-color: #2e9e5b;
        }

        .stats-card .progress.pink {
            background-color: #ff6384;
        }

        .stats-card .progress.blue {
            background-color: #36a2eb;
        }

        .stats-card .progress.orange {
            background-color: #ff9f40;
        }

        .chart-container {
            position: absolute;
            right: 20px;
            top: 20px;
            width: 80px;
            height: 50px;
        }

        .detailed-stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .detailed-stats-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .detailed-stats-card h3 {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .growth-tag {
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .growth-tag.positive {
            color: #2e9e5b;
            background-color: rgba(46, 158, 91, 0.1);
        }

        .growth-tag.negative {
            color: #ff6384;
            background-color: rgba(255, 99, 132, 0.1);
        }

        .stats-tabs {
            display: flex;
            margin-bottom: 15px;
        }

        .stats-tab {
            margin-right: 20px;
        }

        .stats-tab p:first-child {
            font-size: 12px;
            color: #888;
            margin-bottom: 5px;
        }

        .stats-tab p:last-child {
            font-size: 18px;
            font-weight: bold;
        }

        .chart-wrapper {
            height: 150px;
        }

        .patient-list-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .patient-table {
    width: 100%;
    border-collapse: collapse;
    background-color: white;
    border-radius: 8px;
}

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-header h3 {
            font-size: 16px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-header .controls {
            display: flex;
        }

        .card-header .control-button {
            background: none;
            border: none;
            color: #888;
            cursor: pointer;
            margin-left: 10px;
        }

        table {
    display: table;
    border-collapse: separate;
    box-sizing: border-box;
    text-indent: initial;
    unicode-bidi: isolate;
    border-spacing: 2px;
    border-color: gray;
}

        thead th {
            text-align: left;
            padding: 10px 15px;
            font-size: 14px;
            font-weight: 500;
            color: #888;
            border-bottom: 1px solid #e0e0e0;
        }

        tbody td {
            padding: 15px;
            font-size: 14px;
            border-bottom: 1px solid #f0f0f0;
        }

        .disease-tag {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            color: white;
        }

        .disease-tag.influenza {
            background-color: #36a2eb;
        }

        .disease-tag.cholera {
            background-color: #ff9f40;
        }

        .disease-tag.amoebasis {
            background-color: #4bc0c0;
        }

        .disease-tag.jaundice {
            background-color: #ff6384;
        }

        .disease-tag.leptospirosis {
            background-color: #4bc0c0;
        }

        .disease-tag.hepatitis {
            background-color: #ff9f40;
        }

        .disease-tag.typhoid {
            background-color: #4bc0c0;
        }

        .disease-tag.malaria {
            background-color: #ff6384;
        }

        .action-button {
            background-color: #e8f5e9;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2e9e5b;
            cursor: pointer;
            margin-right: 5px;
        }

        .action-button.delete {
            background-color: #ffebee;
            color: #ff6384;
        }

        .actions {
            display: flex;
        }
        
/* Demo */

.site {
  min-height: 100dvh;
  display: grid;
  grid-template-rows: auto 1fr auto;
  grid-template-columns: minmax(0, 1fr);
}
.site-footer {
  /*display: flex;*/
  align-items: center;
  justify-content: center;
  border-top: 1px solid var(--color--black);
  min-height: 100px;
  background: #222C3C;

  color: white;
  font-size: 14px;
  text-align: center;
}

/*
footer {
            text-align: center;
            /*padding: 20px;
           /* margin-top: -20px;
            /* Remove the margin-left property 
            font-size: 14px;
            color: #fff;
            
        
            width: 100%; /* Make it full width 
           z-index: 1010; /* Higher than sidebar's z-index (1000) 


           background-color: #252836;
            color: #888;
            padding: 15px 20px;
            font-size: 12px;
            text-align: center;

         Horizontal container 

position: relative;
height: 52.09px;

top:auto;


        }
        
        */

        

        footer a {
            color: #4bc0c0;
            text-decoration: none;
        }
        
         /* Additional Responsive Styles */
@media screen and (max-width: 1024px) {
  .top-row, .metrics-row {
    grid-template-columns: 1fr 1fr;
  }
  
  .survey-card {
    grid-column: span 2;
  }
}

@media screen and (max-width: 768px) {
  .top-row, .metrics-row {
    grid-template-columns: 1fr;
  }
  
  .survey-card {
    grid-column: span 1;
  }
}



/* Fix footer to ensure it's always at the bottom */
footer {
    background: #222C3C;

    color: #888;
    padding: 15px 20px;
    font-size: 12px;
    text-align: center;
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 52px;
    z-index: 1010;
}

/* Mobile specific adjustments for sidebar and footer */
@media screen and (max-width: 768px) {
   
    
    /* Fix footer */
    footer {
        position: fixed;
        bottom: 0;
        width: 100%;
        z-index: 1010;
    }
    
    /* Create space at the bottom of the content to prevent overlap with footer */
    .dashboard-container {
        padding-bottom: 60px;
    }
    
    /* Adjust breadcrumb positioning */
    .breadcrumb {
        left: auto;
        right: auto;
        position: sticky;
        transform: none;
        width: 100%;
        margin-bottom: 15px;
    }
    
    
}

@media screen and (min-height: 900px) {
    .sidebar {
        height: calc(100vh - 52px);
    }
}

/* For short screens, make sure content is scrollable */
@media screen and (max-height: 600px) {
    .sidebar {
        height: calc(100vh - 2px);
        overflow-y: auto;
    }
    
    .main-content {
        padding-bottom: 70px;
    }
}

/* When printing or when footer should be part of normal flow for very long pages */
@media print, screen and (min-height: 1200px) {
    .sidebar {
        height: calc(100% - 2px);
    }
    
    footer {
        position: relative;
        margin-top: 20px;
    }
    
    .main-content {
        min-height: calc(100vh - 130px);
    }
}

    </style>
</head>
<body>
    <div class="container site">
        <div class="sidebar">
            <!-- Sidebar content would go here -->
             <!-- Sidebar -->
<aside class="sidebar">
    <div style=" background: #5368f5;" class="logo">
        <div style= "  background-color: #5368f5;  width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; border-radius: 8px; color: white; font-weight: bold;"><svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M30.8275 8.02693C28.4349 8.09529 26.5209 10.0094 26.5209 12.3336C26.4525 13.9742 27.3412 15.4781 28.7084 16.2301V23.8863C28.7084 27.8512 25.222 30.9957 21.0521 30.9957C16.9506 30.9957 13.5326 27.9879 13.3959 24.2281C18.3861 23.2027 22.1459 18.8277 22.1459 13.4957V2.89998C22.1459 2.14803 21.5306 1.46443 20.7787 1.32771L16.472 0.439041C15.5834 0.233963 14.7631 0.849197 14.558 1.73787L14.3529 2.76326C14.1478 3.65193 14.7631 4.5406 15.6517 4.74568L17.7025 5.15584V13.4273C17.7025 17.0504 14.8314 20.0582 11.2084 20.0582C7.58533 20.1265 4.57751 17.1871 4.57751 13.4957V5.15584L6.69666 4.74568C7.58533 4.5406 8.20056 3.72029 7.99548 2.83162L7.79041 1.73787C7.58533 0.849197 6.76501 0.233963 5.87634 0.439041L1.5697 1.25935C0.817749 1.46443 0.270874 2.14803 0.270874 2.89998V13.4957C0.270874 18.8277 4.03064 23.2027 9.02087 24.2281C9.15759 30.4488 14.4896 35.3707 21.0521 35.3707C27.683 35.3707 33.0834 30.2437 33.0834 23.8863V16.2301C34.3822 15.4781 35.2709 14.0426 35.2709 12.4019C35.2709 10.0094 33.2201 8.02693 30.8275 8.02693ZM30.8959 13.4957C30.2806 13.4957 29.8021 13.0172 29.8021 12.4019C29.8021 11.8551 30.2806 11.3082 30.8959 11.3082C31.4427 11.3082 31.9896 11.8551 31.9896 12.4019C31.9896 13.0172 31.4427 13.4957 30.8959 13.4957Z" fill="white"/>
            </svg>
            </div>
        <span>Medical</span>
    </div>
    
    <div class="user-profile-sidebar">
        <div class="avatar">
            <img src="logo.jfif" alt="Dr. Kiran Patel">
        </div>
        <div class="user-info">
            <h3>Dr. Kiran Patel</h3>
            <p>Administrator</p>
        </div>
    </div>
    
    <div class="sidebar-menu">
        <div style="background-color: white;" class="menu-item active grid-con">
            <i class="fas fa-th-large"></i>
            <span style="width:100px; padding-left: 12px;">Dashboard</span>
        </div>
        
        <div class="menu-item  grid-con">
            <i class="fas fa-envelope"></i>
            <span style="width:100px; padding-left: 12px;">Email</span>
            <div class="badge-count">5</div>
        </div>
        
        <div class="menu-item  grid-con">
            <i class="fas fa-calendar"></i>
            <span style="width:100px; padding-left: 12px;">Calendar</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-calendar-check"></i>
            <span style="width:100px; padding-left: 12px;">Appointment</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-user-md"></i>
            <span style="width:100px; padding-left: 12px;">Doctors</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-users"></i>
            <span style="width:100px; padding-left: 12px;">Other Staff</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-procedures"></i>
            <span>Patients</span>
        </div>
        
        <div class="menu-item  grid-con">
            <i class="fas fa-door-open"></i>
            <span style="width:140px; padding-left: 12px;">Room Allotment</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-credit-card"></i>
            <span style="width:100px; padding-left: 12px;">Payments</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-cog"></i>
            <span style="width:100px; padding-left: 12px;">Widget</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-puzzle-piece"></i>
            <span style="width:100px; padding-left: 12px;">UI Elements</span>
            <div class="badge-count">10</div>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-layer-group"></i>
            <span style="width:140px; padding-left: 12px;">Material Elements</span>
        </div>
    </div>
</aside>

<!-- Header -->
<header>
    <div class="search-bar">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Search...">
    </div>
    
    <div class="user-menu">
        <div class="language-selector">
            <span style="padding-right: 7px;">English</span>
          <!--  <i class="fas fa-chevron-down"></i>-->
        </div>
        
        <div class="notifications badge" data-count="2">
            <i class="fas fa-bell"></i>
        </div>
        
        <div class="messages badge" data-count="2">
            <i class="fas fa-envelope"></i>
        </div>
        
        <div class="user-profile">
            <img src="logo.jfif" alt="User" style="width: 32px; height: 32px; border-radius: 50%;  ">
            <span style="display: grid; padding-right: 7px; padding-left: 7px;">Kiran</span>
         <!--   <i class="fas fa-chevron-down grid-con"></i>-->
        </div>
    </div>
        </div>
        
        <div class="main-content">
            <div class="header">
                <h1>Dashboard</h1>
                <div class="breadcrumb">
                    <a href="#">
                        Home</a>
                    <span> < </span>
                    <a href="#">Dashboard</a>
                </div>
            </div>

            <div class="dashboard-container">
            
                <div class="top-row">
                    <!--<div class="stats-card card2 cards-container small-card">
                        <h3>New Patients</h3>
                        <div class="number" style="color: #2e9e5b;">125</div>
                        <div class="progress-bar">
                            <div class="progress green" style="width: 65%;"></div>
                        </div>
                        <div class="chart-container">
                            <canvas id="newPatientsChart"></canvas>
                        </div>
                    </div>-->
                    <div class="stats-card card2 cards-container small-card">
                        <div class="card-header">
                            <h3>New Patients</h3>
                            <button id="refreshBtn" class="refresh-btn" onclick="refreshDataFromGoogleSheets()" title="Refresh data from Google Sheets">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div class="number" style="color: #2e9e5b;" id="totalPatientsCount">Loading...</div>
                        <div class="progress-bar">
                            <div class="progress green" id="newPatientsProgress" style="width: 0%;"></div>
                        </div>
                        <div class="chart-container">
                            <canvas id="newPatientsChart"></canvas>
                        </div>
                        <div class="chart-legend">
                            <div class="legend-item">
                                <span class="legend-color" style="background-color: #36a2eb;"></span>
                                <span class="legend-text">     </span>
                            </div>
                            <!--<div class="legend-item">
                                <span class="legend-color" style="background-color: #6c5ce7;"></span>
                                <span class="legend-text">Existing Patients</span>
                            </div>-->
                        </div>
                    </div>
                    
                    <div class="stats-card card2 cards-container small-card">
                        <h3>OPD Patients</h3>
                        <div class="number" style="color: #36a2eb;">218</div>
                        <div class="progress-bar">
                            <div class="progress pink" style="width: 45%;"></div>
                        </div>
                        <div class="chart-container">
                            <canvas id="opdPatientsChart"></canvas>
                        </div>
                    </div>
                    
                    <div  class="stats-card card survey-card ">
                        <div class="card-header">
                            <h3>HOSPITAL SURVEY</h3>
                            <div  class="controls">
                                <button class="control-button">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <button class="control-button">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div style="position: relative; width: 98.4%; height: 80%;">
                            <canvas id="hospitalSurveyChart"></canvas>
                        </div>
                    </div>
                    
                    <div  class="stats-card card cards-container small-card">
                        <h3>Today's Operations</h3>
                        <div class="number" style="color: #2e9e5b;">25</div>
                        <div class="progress-bar">
                            <div class="progress green" style="width: 40%;"></div>
                        </div>
                        <div class="chart-container">
                            <canvas id="operationsChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="stats-card card cards-container small-card">
                        <h3>Visitors</h3>
                        <div class="number" style="color: #ff9f40;">2,479</div>
                        <div class="progress-bar">
                            <div class="progress orange" style="width: 75%;"></div>
                        </div>
                        <div class="chart-container">
                            <canvas id="visitorsChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="metrics-row">
                    <div class="card metric-card">
                        <h3>
                            New Patient
                            <span class="growth-tag positive">+25% high than last month</span>
                        </h3>
                        <div class="stats-tabs">
                            <div class="stats-tab">
                                <p>Overall Growth</p>
                                <p>35.80%</p>
                            </div>
                            <div class="stats-tab">
                                <p>Monthly</p>
                                <p>45.20%</p>
                            </div>
                            <div class="stats-tab">
                                <p>Day</p>
                                <p>5.50%</p>
                            </div>
                        </div>
                        <div style="position: relative; width: 98.4%; height: 80%;" class="chart-wrapper">
                            <canvas id="newPatientChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card metric-card">
                        <h3>
                            Heart Surgeries
                            <span class="growth-tag negative">-20% Low than last month</span>
                        </h3>
                        <div class="stats-tabs">
                            <div class="stats-tab">
                                <p>Overall Growth</p>
                                <p>20.60%</p>
                            </div>
                            <div class="stats-tab">
                                <p>Monthly</p>
                                <p>65.30%</p>
                            </div>
                            <div class="stats-tab">
                                <p>Day</p>
                                <p>4.90%</p>
                            </div>
                        </div>
                        <div style="position: relative; width: 98.4%; height: 80%;" class="chart-wrapper">
                            <canvas id="heartSurgeriesChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card metric-card">
                        <h3>
                            Medical Treatment
                            <span class="growth-tag positive">+10% high than last month</span>
                        </h3>
                        <div class="stats-tabs">
                            <div class="stats-tab">
                                <p>Overall Growth</p>
                                <p>38.40%</p>
                            </div>
                            <div class="stats-tab">
                                <p>Monthly</p>
                                <p>52.49%</p>
                            </div>
                            <div class="stats-tab">
                                <p>Day</p>
                                <p>4.70%</p>
                            </div>
                        </div>
                        <div style="position: relative; width: 98.4%; height: 80%;" class="chart-wrapper">
                            <canvas id="medicalTreatmentChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="card1 table-card">
                  <!-- Patient List Table -->
                        <div class="patient-table">
                            <div class="table-header">
                                <div class="table-title">ADMIT PATIENT LIST</div>
                                <div class="table-controls">
                                    <button class="chart-btn">📊</button>
                                    <button class="chart-btn">📈</button>
                                    <button class="chart-btn">❌</button>
                                </div>
                            </div>
                            <div id="loading" class="loading">Loading patient data...</div>
                            <table id="patient-table" style="display: none;">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>Name</th>
                                        <th>Assigned Doctor</th>
                                        <th>Date Of Admit</th>
                                        <th>Diseases</th>
                                        <th>Room No</th>
                                        <th>Edit</th>
                                    </tr>
                                </thead>
                                <tbody id="patient-tbody">
                                    <!-- Data will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div> 
                         
                </div>
            </div>
        </div>
    </div>

    
    <footer>
        <div class="site-footer">
            2021 © RadiStar Hospital Template By Rediaxtheme
        </div>
    </footer>

    <script>
        // Helper function to create gradient
        function createGradient(ctx, colorStart, colorEnd) {
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, colorStart);
            gradient.addColorStop(1, colorEnd);
            return gradient;
        }

        // Chart 1: New Patients
        /*
        const newPatientsCtx = document.getElementById('newPatientsChart').getContext('2d');
        const newPatientsChart = new Chart(newPatientsCtx, {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [65, 35],
                    backgroundColor: [
                        '#36a2eb',
                        '#6c5ce7'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%',
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: false
                    }
                }
            }
        });

        */
        // Function to fetch and update new patients data
            async function fetchAndUpdateNewPatientsData() {
                try {
                    // Fetch patients data from the backend
                    const response = await fetch('/api/patients');
                    const data = await response.json();
                    
                    if (data.error) {
                        console.error('Error fetching patients data:', data.error);
                        return;
                    }
                    
                    // Update the total patients number
                    const totalPatientsElement = document.querySelector('.stats-card.card2 .number');
                    const totalPatients = data.total || 0;
                    totalPatientsElement.textContent = totalPatients;
                    
                    // Calculate new patients (patients admitted in the last 30 days)
                    const currentDate = new Date();
                    const thirtyDaysAgo = new Date();
                    thirtyDaysAgo.setDate(currentDate.getDate() - 300);
                    
                    const newPatients = data.patients.filter(patient => {
                        const admitDate = new Date(patient.admitDate);
                        return admitDate >= thirtyDaysAgo;
                    }).length;
                    
                    // Calculate percentages for the doughnut chart
                    const newPatientsPercentage = totalPatients > 0 ? Math.round((newPatients / totalPatients) * 100) : 0;
                    const existingPatientsPercentage = 100 - newPatientsPercentage;
                    
                    // Update the progress bar
                    const progressBar = document.querySelector('.stats-card.card2 .progress');
                    progressBar.style.width = `${newPatientsPercentage}%`;
                    
                    // Update the doughnut chart
                    updateNewPatientsChart(newPatientsPercentage, existingPatientsPercentage);
                    
                    console.log(`Updated New Patients: ${newPatients}/${totalPatients} (${newPatientsPercentage}%)`);
                    
                } catch (error) {
                    console.error('Error updating new patients data:', error);
                }
            }

            // Function to update the new patients chart
            function updateNewPatientsChart(newPatientsPercentage, existingPatientsPercentage) {
                // Get the chart instance
                const chartCanvas = document.getElementById('newPatientsChart');
                const existingChart = Chart.getChart(chartCanvas);
                
                // If chart exists, destroy it first
                if (existingChart) {
                    existingChart.destroy();
                }
                
                // Create new chart with updated data
                const newPatientsCtx = chartCanvas.getContext('2d');
                const newPatientsChart = new Chart(newPatientsCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['New Patients', 'Existing Patients'],
                        datasets: [{
                            data: [newPatientsPercentage, existingPatientsPercentage],
                            backgroundColor: [
                                '#36a2eb',
                                '#6c5ce7'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '70%',
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: true,
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.parsed || 0;
                                        return `${label}: ${value}%`;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Function to refresh data from Google Sheets
            async function refreshDataFromGoogleSheets() {
                try {
                    const response = await fetch('/api/refresh-data', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    const result = await response.json();
                    
                    if (result.error) {
                        console.error('Error refreshing data:', result.error);
                        return;
                    }
                    
                    console.log('Data refreshed successfully:', result.message);
                    
                    // Update the new patients data after refresh
                    await fetchAndUpdateNewPatientsData();
                    
                } catch (error) {
                    console.error('Error refreshing data from Google Sheets:', error);
                }
            }

            // Initialize the new patients data when the page loads
            document.addEventListener('DOMContentLoaded', function() {
                // Initial load
                fetchAndUpdateNewPatientsData();
                
                // Set up periodic refresh (every 5 minutes)
                setInterval(fetchAndUpdateNewPatientsData, 5 * 60 * 1000);
            });

            // Alternative function to fetch data directly from Google Sheets CSV (if you want to bypass the backend)
            async function fetchDataDirectlyFromGoogleSheets() {
                const GOOGLE_SHEETS_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTuJjVTqsq6i6lBqe6BRWBhtUHp1ZtVQKZYYDNeCB2wR1hNNzlur3Lz8lupsFrQf3CSHRZUrw1zDtZ9/pub?gid=1293261296&single=true&output=csv";
                
                try {
                    const response = await fetch(GOOGLE_SHEETS_CSV_URL);
                    const csvText = await response.text();
                    
                    // Simple CSV parsing (you might want to use a proper CSV parser like Papa Parse)
                    const lines = csvText.split('\n');
                    const headers = lines[0].split(',');
                    const patients = [];
                    
                    for (let i = 1; i < lines.length; i++) {
                        if (lines[i].trim() === '') continue;
                        
                        const values = lines[i].split(',');
                        const patient = {};
                        
                        headers.forEach((header, index) => {
                            patient[header.trim()] = values[index] ? values[index].trim() : '';
                        });
                        
                        patients.push(patient);
                    }
                    
                    // Update the display with fetched data
                    const totalPatients = patients.length;
                    const totalPatientsElement = document.querySelector('.stats-card.card2 .number');
                    totalPatientsElement.textContent = totalPatients;
                    
                    // Calculate new patients (last 30 days)
                    const currentDate = new Date();
                    const thirtyDaysAgo = new Date();
                    thirtyDaysAgo.setDate(currentDate.getDate() - 300);
                    
                    const newPatients = patients.filter(patient => {
                        const admitDate = new Date(patient.admitDate);
                        return admitDate >= thirtyDaysAgo;
                    }).length;
                    
                    const newPatientsPercentage = totalPatients > 0 ? Math.round((newPatients / totalPatients) * 100) : 0;
                    const existingPatientsPercentage = 100 - newPatientsPercentage;
                    
                    // Update chart
                    updateNewPatientsChart(newPatientsPercentage, existingPatientsPercentage);
                    
                    console.log(`Direct fetch - New Patients: ${newPatients}/${totalPatients} (${newPatientsPercentage}%)`);
                    
                } catch (error) {
                    console.error('Error fetching data directly from Google Sheets:', error);
                }
            }

        // Chart 2: OPD Patients
        const opdPatientsCtx = document.getElementById('opdPatientsChart').getContext('2d');
        const opdPatientsChart = new Chart(opdPatientsCtx, {
            type: 'bar',
            data: {
                labels: Array(12).fill(''),
                datasets: [{
                    data: [30, 40, 45, 50, 55, 40, 35, 30, 45, 50, 55, 40],
                    backgroundColor: '#36a2eb',
                    barThickness: 4,
                    borderRadius: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: false
                    }
                },
                scales: {
                    x: {
                        display: false
                    },
                    y: {
                        display: false
                    }
                }
            }
        });

        // Chart 3: Hospital Survey
        const hospitalSurveyCtx = document.getElementById('hospitalSurveyChart').getContext('2d');
        const hospitalSurveyChart = new Chart(hospitalSurveyCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    data: [10, 40, 30, 40, 50, 45, 35, 55, 25, 30, 22, 17],
                    borderColor: '#6c5ce7',
                    tension: 0.4,
                    pointRadius: 0,
                    borderWidth: 3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        beginAtZero: true,
                        max: 60,
                        ticks: {
                            stepSize: 10
                        }
                    }
                }
            }
        });

        // Chart 4: Operations
        const operationsCtx = document.getElementById('operationsChart').getContext('2d');
        const operationsChart = new Chart(operationsCtx, {
            type: 'line',
            data: {
                labels: Array(7).fill(''),
                datasets: [{
                    data: [20, 25, 20, 30, 25, 35, 30],
                    borderColor: '#8e44ad',
                    tension: 0,
                    pointRadius: 0,
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: false
                    }
                },
                scales: {
                    x: {
                        display: false
                    },
                    y: {
                        display: false
                    }
                }
            }
        });

        // Chart 5: Visitors
        const visitorsCtx = document.getElementById('visitorsChart').getContext('2d');
        const visitorsChart = new Chart(visitorsCtx, {
            type: 'line',
            data: {
                labels: Array(12).fill(''),
                datasets: [{
                    data: [20, 25, 30, 35, 40, 50, 40, 30, 25, 35, 50, 40],
                    borderColor: '#6c5ce7',
                    backgroundColor: 'rgba(108, 92, 231, 0.2)',
                    tension: 0.4,
                    pointRadius: 0,
                    borderWidth: 2,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: false
                    }
                },
                scales: {
                    x: {
                        display: false
                    },
                    y: {
                        display: false
                    }
                }
            }
        });

        // Chart 6: New Patient
        const newPatientCtx = document.getElementById('newPatientChart').getContext('2d');
        const newPatientChart = new Chart(newPatientCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                datasets: [{
                    label: 'Current',
                    data: [20, 25, 40, 30, 45, 35, 45],
                    borderColor: '#4bc0c0',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    tension: 0.4,
                    pointRadius: 0,
                    borderWidth: 2,
                    fill: true
                },
                {
                    label: 'Previous',
                    data: [30, 35, 25, 45, 30, 40, 35],
                    borderColor: '#aaa',
                    backgroundColor: 'rgba(170, 170, 170, 0.2)',
                    tension: 0.4,
                    pointRadius: 0,
                    borderWidth: 2,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            stepSize: 20
                        }
                    }
                }
            }
        });

        // Chart 7: Heart Surgeries
        const heartSurgeriesCtx = document.getElementById('heartSurgeriesChart').getContext('2d');
        const heartSurgeriesChart = new Chart(heartSurgeriesCtx, {
            type: 'bar',
            data: {
                labels: ['Jan \'19', 'Q2 Jan', 'Q3 Jan', 'Q4 Jan', 'Q5 Jan', 'Q6 Jan'],
                datasets: [
                    {
                        label: 'Dataset 1',
                        data: [45, 55, 41, 67, 22, 43],
                        backgroundColor: '#36a2eb'
                    },
                    {
                        label: 'Dataset 2',
                        data: [13, 23, 20, 8, 13, 27],
                        backgroundColor: '#4bc0c0'
                    },
                    {
                        label: 'Dataset 3',
                        data: [11, 17, 15, 15, 21, 14],
                        backgroundColor: '#ff9f40'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        stacked: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        stacked: true,
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            stepSize: 20
                        }
                    }
                }
            }
        });

        // Chart 8: Medical Treatment
        const medicalTreatmentCtx = document.getElementById('medicalTreatmentChart').getContext('2d');
        const medicalTreatmentChart = new Chart(medicalTreatmentCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul','Aug'],
                datasets: [{
                    label: 'Treatment A',
                    data: [30, 40, 35, 50, 90, 40, 50, 40],
                    borderColor: '#f59e0b',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4,
                    borderDash: [5, 5]
                }, {
                    label: 'Treatment B',
                    data: [25, 35, 40, 20, 25, 30, 35, 40],
                    borderColor: '#3b82f6',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4
                }, {
                    label: 'Treatment C',
                    data: [35, 45, 30, 25, 15, 40, 20, 30],
                    borderColor: '#10b981',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4,
                    borderDash: [3, 3]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        min: 0,
                        max: 100
                    }
                }
            }
        });

         // Global variables
        let patientData = [];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadPatientData();
        });

        // Load patient data from backend
        async function loadPatientData() {
            try {
                const response = await fetch('/api/patients');
                if (!response.ok) {
                    throw new Error('Failed to load patient data');
                }
                
                const data = await response.json();
                patientData = data.patients || [];
                
                // Populate patient table
                populatePatientTable(patientData);
                
                // Hide loading, show table
                document.getElementById('loading').style.display = 'none';
                document.getElementById('patient-table').style.display = 'table';
                
            } catch (error) {
                console.error('Error loading patient data:', error);
                showError('Failed to load patient data. Please try again.');
                document.getElementById('loading').style.display = 'none';
                loadSampleData(); // Fallback to sample data
            }
        }

        // Populate patient table
        function populatePatientTable(patients) {
            const tbody = document.getElementById('patient-tbody');
            tbody.innerHTML = '';
            
            patients.forEach((patient, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${patient.name || 'N/A'}</td>
                    <td>${patient.doctor || 'N/A'}</td>
                    <td>${formatDate(patient.admitDate) || 'N/A'}</td>
                    <td><span class="disease-tag disease-${getDiseaseClass(patient.disease)}">${patient.disease || 'N/A'}</span></td>
                    <td>${patient.roomNo || 'N/A'}</td>
                    <td class="action-buttons">
                        <button class="btn-edit" onclick="editPatient(${index})">✓</button>
                        <button class="btn-delete" onclick="deletePatient(${index})">✗</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Helper functions
        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-GB');
        }

        function getDiseaseClass(disease) {
            if (!disease) return 'other';
            const diseaseMap = {
                'influenza': 'influenza',
                'asthma': 'asthma',
                'diabetes': 'diabetes',
                'jaundice': 'jaundice',
                'malaria': 'malaria',
                'typhoid': 'typhoid',
                'hepatitis': 'hepatitis'
            };
            return diseaseMap[disease.toLowerCase()] || 'other';
        }

        function showError(message) {
            const errorDiv = document.getElementById('error-message');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        // Patient management functions
        function editPatient(index) {
            const patient = patientData[index];
            alert(`Edit patient: ${patient.name}`);
            // Implement edit functionality
        }

        function deletePatient(index) {
            if (confirm('Are you sure you want to delete this patient?')) {
                patientData.splice(index, 1);
                populatePatientTable(patientData);
            }
        }

        // Sample data for demonstration
        const samplePatients = [
            {
                name: "Jena Brinsker",
                doctor: "Dr Kenny Josh",
                admitDate: "2016-05-27",
                disease: "influenza",
                roomNo: "101"
            },
            {
                name: "Mark Hay",
                doctor: "Dr Mark",
                admitDate: "2017-05-26",
                disease: "asthma",
                roomNo: "105"
            },
            {
                name: "Anthony Davie",
                doctor: "Dr Cinnabar",
                admitDate: "2018-05-21",
                disease: "diabetes",
                roomNo: "106"
            },
            {
                name: "David Perry",
                doctor: "Dr Felix",
                admitDate: "2016-04-20",
                disease: "jaundice",
                roomNo: "105"
            },
            {
                name: "Anthony Davie",
                doctor: "Dr Beryl",
                admitDate: "2016-05-24",
                disease: "malaria",
                roomNo: "102"
            },
            {
                name: "Alan Gilchrist",
                doctor: "Dr Joshep",
                admitDate: "2016-05-22",
                disease: "hepatitis",
                roomNo: "103"
            },
            {
                name: "Mark Hay",
                doctor: "Dr Jayesh",
                admitDate: "2016-06-18",
                disease: "typhoid",
                roomNo: "107"
            },
            {
                name: "Sue Woodger",
                doctor: "Dr Sharma",
                admitDate: "2016-05-17",
                disease: "malaria",
                roomNo: "108"
            }
        ];

        // Fallback to sample data if API fails
        function loadSampleData() {
            patientData = samplePatients;
            populatePatientTable(patientData);
            document.getElementById('loading').style.display = 'none';
            document.getElementById('patient-table').style.display = 'table';
        }

        // Load sample data after 2 seconds if API doesn't respond
        setTimeout(() => {
            if (document.getElementById('loading').style.display !== 'none') {
                loadSampleData();
            }
        }, 2000);
    
    </script>
</body>
</html>