



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/all.min.js"></script>
    <style>
        :root {
            --primary-color: white;
            --sidebar-width: 240px;
            --header-height: 60px;
            --border-radius: 8px;
            --bg-color: #f5f7fb;
            --card-bg: #ffffff;
            --border-color: #e0e6ed;
            --text-color: #333;
            --muted-text: #718096;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Segoe UI", Arial, sans-serif;
        }

        body {
            background-color: #f0f2f5;
            color: #333;
        }
        header {
            position: fixed;
            top: 0;
            left: var(--sidebar-width);
            right: 0;
            height: var(--header-height);
            background-color: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            z-index: 10;
        }.patient-table {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        
        .search-bar {
            display: flex;
            align-items: center;
            background-color: var(--bg-color);
            border-radius: 4px;
            padding: 8px 12px;
            width: 300px;
        }
        
        .search-bar input {
            border: none;
            background: transparent;
            width: 100%;
            padding: 0 8px;
            outline: none;
        }

         body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 32px;
            color: #333;
            margin-bottom: 10px;
        }

        .breadcrumb {
            color: #666;
            font-size: 14px;
        }

        .breadcrumb span {
            margin: 0 10px;
        }

        /* Patient List Table */
        .patient-table {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .table-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .table-controls {
            display: flex;
            gap: 10px;
        }

        .chart-btn {
            padding: 5px 10px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .chart-btn:hover {
            background: #f0f0f0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            height: 680px;  /* Adjust height to fit 10 entries */
            overflow-y: auto;
            scroll-behavior: smooth;
            /*border: 1px solid #ccc;*/
            border-radius: 8px;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        th {
            /*background: #f8f9fa;*/
            font-weight: 600;
            color: #333;
        }

        .disease-tag {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .disease-influenza {
            background: #1976d2;
            color: #1976d2;
        }

        .disease-asthma {
            background: #f57c00;
            color: #f57c00;
        }

        .disease-diabetes {
            background: #2e7d32;
            color: #2e7d32;
        }

        .disease-jaundice {
            background: #c2185b;
            color: #c2185b;
        }

        .disease-malaria {
            background: #7b1fa2;
            color: #7b1fa2;
        }

        .disease-typhoid {
            background: #00695c;
            color: #00695c;
        }

        .disease-hepatitis {
            background: #f9a825;
            color: #f9a825;
        }

        .disease-other {
            background: #666;
            color: #666;
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .btn-edit, .btn-delete {
            padding: 5px 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .btn-edit {
            background: #4caf50;
            color: white;
        }

        .btn-edit:hover {
            background: #45a049;
        }

        .btn-delete {
            background: #f44336;
            color: white;
        }

        .btn-delete:hover {
            background: #da190b;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .error {
            background: #ffebee;
            color: #c62828;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }


/*
        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 150px;
            background-color: #fff;
            border-right: 1px solid #e0e0e0;
        }

        .main-content {
            flex: 1;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        

        .breadcrumb {
            display: flex;
            align-items: center;
            color: #888;
        }

        .breadcrumb a {
            color: #888;
            text-decoration: none;
        }*/
        .user-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .language-selector, .notifications, .messages, .user-profile {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .badge {
            position: relative;
        }
        
        .badge::after {
            content: attr(data-count);
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #f56565;
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }
        
       /* .sidebar {
            position: fixed;
            top: 0px;
            left: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background-color: var(--card-bg);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            height: 100%;
        }*/
        .sidebar {
    position: fixed;
    top: 0;
    left: 0;
    width: var(--sidebar-width);
    /* Calculate height to stop just before footer */
    height: calc(100vh - 52px); /* 52px is the footer height */
    background-color: var(--card-bg);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    z-index: 1000;
    overflow-y: auto;
}
        
        .logo {
            height: var(--header-height);
            padding: 10px 20px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }
        
        .logo img {
            height: 35px;
        }
        
        .logo span {
            font-size: 18px;
            font-weight: 600;
            margin-left: 10px;
            color: var(--primary-color);
        }
        
        .user-profile-sidebar {
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }
        
        .avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .user-info {
            text-align: center;
        }
        
        .user-info h3 {
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .user-info p {
            color: var(--muted-text);
            font-size: 14px;
        }
        
        .sidebar-menu {
            padding: 20px 0;
            flex: 1;
            overflow-y: auto;
            justify-content: space-between;
            scroll-behavior: smooth;
            

        }
        
        .menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            color: var(--text-color);
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }
        
        .menu-item.active {
            color:  #4680FF;
            ;
            background-color: rgba(83, 104, 245, 0.1);
            position: relative;
        }
        
        .menu-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background-color: var(--primary-color);
        }
        
        .menu-item i {
            width: 20px;
            margin-right: 10px;
        }
        
        .menu-item span {
            flex: 1;
        }
        
        .menu-item .badge-count {
            background-color: var(--primary-color);
            color: white;
            border-radius: 999px;
            padding: 2px 8px;
            font-size: 12px;
        }
        
        .menu-item .arrow {
            font-size: 10px;
            transition: transform 0.2s;
        }
        
        .menu-item.expanded .arrow {
            transform: rotate(90deg);
        }
        
        .main-content {
            margin-left: var(--sidebar-width);
            margin-top: var(--header-height);
            padding: 20px;
        }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .page-header h1 {
            font-size: 24px;
            font-weight: 600;
            
            
            
        }
        h1{
            font-size: 50px;            
            padding: 10px;
            margin-bottom: 30px;
        }
        .breadcrumb {
            display: flex;
            align-items: center;
            color: var(--muted-text);
            font-size: 16px;
            position: relative;
            left:79.3%;
            right:69%;
            bottom:-81%;
            transform: translateY(-80px); /* Negative moves it up */
            top:-19%;
            width: 220px;
            padding: 10px;
            margin-bottom: -40px;




                        /* Button */





            background: rgba(220, 208, 208, 0.3);
            border-radius: 50px;

        }
        
        /* Main Container */
            .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
            }
            
        
        .top-row {
            display: grid;
            grid-template-columns: 1fr 1fr 2fr;
            gap: 20px;
        }

        .breadcrumb a {
            margin: 0 8px;
            font-size: 16px;
            text-decoration: none;
            color: #666;
        }
        

        .breadcrumb span {
            margin: 0 8px;
            color: #999;
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            padding: 15px;
            /*position: relative;*/
            /*new add*/
            margin-bottom: 15px;
            margin-left: -5px;
        }
        .card1 {
           /* background-color: var(--card-bg);*/
            border-radius: var(--border-radius);
           /* box-shadow: 0 2px 5px rgba(0,0,0,0.05);*/
            padding: 15px;
            /*position: relative;*/
            /*new add*/
            margin-bottom: 15px;
        }

        .card2 {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            padding: 15px;
            /*position: relative;*/
            /*new add*/
            margin-bottom: -5px;
            margin-left: -5px;
        }
        
                    /* Small Card Styles */
            .small-card {
            display: flex;
            flex-direction: column;
            }


        .grid-con {
        display: grid;
        grid-template-columns: repeat(5, 1fr); /* Creates 3 columns with equal width */
        gap: 1%; /* Adds 10px gap between grid items */
    }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
        }
        
        .card-tools {
            display: flex;
            gap: 10px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #22c55e;
        }
        
        .stat-value.blue {
            color: #3b82f6;
        }
        
        .stat-value.orange {
            color: #f59e0b;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-bar-fill {
            height: 100%;
            border-radius: 4px;
        }
        
        .progress-bar-fill.green {
            background-color: #22c55e;
            width: 65%;
        }
        
        .progress-bar-fill.blue {
            background-color: #3b82f6;
            width: 75%;
        }
        
        .progress-bar-fill.orange {
            background-color: #f59e0b;
            width: 85%;
        }
        
        .chart-container {
            margin-top: 15px;
            height: 80px;
        }
        /*new add*/
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
           /* margin-bottom: 5px; */
            
    }
    .cards-container1 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
           /* margin-bottom: 5px; */
            
    }
        .card-full-width {
            grid-column: span 3;
        }
        
        .chart-card {
            height: 250px;
        }
        
        .growth-stats {
            display: flex;
            gap: 15px;
        }
        
        .growth-stat {
            flex: 1;
        }
        
        .growth-label {
            font-size: 14px;
            color: var(--muted-text);
            margin-bottom: 5px;
        }
        
        .growth-value {
            font-size: 16px;
            font-weight: 600;
        }
        
        .stat-change {
            font-size: 12px;
            margin-top: 5px;
        }
        
        .stat-change.positive {
            color: #22c55e;
        }
        
        .stat-change.negative {
            color: #ef4444;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }
        .table-card {
    padding: 15px;
}
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        th {
            font-weight: 600;
            color: var(--muted-text);
        }
        
        .status-pill {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-pill.diabetes {
            background-color: #c4f1de;
            color: #0f766e;
        }
        
        .status-pill.cardiac {
            background-color: #fed7aa;
            color: #9a3412;
        }
        
        .status-pill.anomalia {
            background-color: #a7f3d0;
            color: #065f46;
        }
        
        .status-pill.jaundice {
            background-color: #fecaca;
            color: #b91c1c;
        }
        
        .status-pill.leptospirosis {
            background-color: #bae6fd;
            color: #0369a1;
        }
        
        .status-pill.hepatitis {
            background-color: #fed7aa;
            color: #9a3412;
        }
        
        .status-pill.typhoid {
            background-color: #c1e1c1;
            color: #166534;
        }
        
        .status-pill.malaria {
            background-color: #fecaca;
            color: #b91c1c;
        }
        
        .action-button {
            padding: 6px;
            border-radius: 4px;
            background-color: #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .action-button:hover {
            background-color: #cbd5e1;
        }
        
        .action-button.edit {
            color: #059669;
        }
        
        .action-button.delete {
            color: #dc2626;
        }
        
       
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 0px;
        }

        .stats-grid .card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .survey-card {
            grid-row: span 2;
            margin-bottom: 15px;

            width: 520px;
            right: -0.8vh;
        }

       

.metrics-row {
    display: grid
;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
}

.metric-card {
    padding: 20px;
}

.metric-header {
    display: flex
;
    justify-content: space-between;
    margin-bottom: 15px;
}

        .stats-card {
            position: relative;
        }

        .stats-card h3 {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 15px;
        }

        .stats-card .number {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2e9e5b;
        }

        .stats-card .progress-bar {
            height: 6px;
            background-color: #e0e0e0;
            border-radius: 3px;
            margin-bottom: 5px;
        }

        .stats-card .progress {
            height: 100%;
            border-radius: 3px;
        }

        .stats-card .progress.green {
            background-color: #2e9e5b;
        }

        .stats-card .progress.pink {
            background-color: #ff6384;
        }

        .stats-card .progress.blue {
            background-color: #36a2eb;
        }

        .stats-card .progress.orange {
            background-color: #ff9f40;
        }

        .chart-container {
            position: absolute;
            right: 20px;
            top: 20px;
            width: 80px;
            height: 50px;
        }

        .detailed-stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .detailed-stats-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .detailed-stats-card h3 {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .growth-tag {
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .growth-tag.positive {
            color: #2e9e5b;
            background-color: rgba(46, 158, 91, 0.1);
        }

        .growth-tag.negative {
            color: #ff6384;
            background-color: rgba(255, 99, 132, 0.1);
        }

        .stats-tabs {
            display: flex;
            margin-bottom: 15px;
        }

        .stats-tab {
            margin-right: 20px;
        }

        .stats-tab p:first-child {
            font-size: 12px;
            color: #888;
            margin-bottom: 5px;
        }

        .stats-tab p:last-child {
            font-size: 18px;
            font-weight: bold;
        }

        .chart-wrapper {
            height: 150px;
        }

        .patient-list-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .patient-table {
    width: 100%;
    border-collapse: collapse;
    background-color: white;
    border-radius: 8px;
    min-width: 1025px;/*680*/
}

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-header h3 {
            font-size: 16px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-header .controls {
            display: flex;
        }

        .card-header .control-button {
            background: none;
            border: none;
            color: #888;
            cursor: pointer;
            margin-left: 10px;
        }

        table {
    display: table;
    border-collapse: separate;
    box-sizing: border-box;
    text-indent: initial;
    unicode-bidi: isolate;
    border-spacing: 2px;
    border-color: gray;
}

        thead th {
            text-align: left;
            padding: 10px 15px;
            font-size: 14px;
            font-weight: 500;
            color: #888;
            border-bottom: 1px solid #e0e0e0;
        }

        tbody td {
            padding: 15px;
            font-size: 14px;
            border-bottom: 1px solid #f0f0f0;
        }

        .disease-tag {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            color: white;
        }

        .disease-tag.influenza {
            background-color: #36a2eb;
        }

        .disease-tag.cholera {
            background-color: #ff9f40;
        }

        .disease-tag.amoebasis {
            background-color: #4bc0c0;
        }

        .disease-tag.jaundice {
            background-color: #ff6384;
        }

        .disease-tag.leptospirosis {
            background-color: #4bc0c0;
        }

        .disease-tag.hepatitis {
            background-color: #ff9f40;
        }

        .disease-tag.typhoid {
            background-color: #4bc0c0;
        }

        .disease-tag.malaria {
            background-color: #ff6384;
        }

        .action-button {
            background-color: #e8f5e9;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2e9e5b;
            cursor: pointer;
            margin-right: 5px;
        }

        .action-button.delete {
            background-color: #ffebee;
            color: #ff6384;
        }

        .actions {
            display: flex;
        }
        
/* Demo */

.site {
  min-height: 100dvh;
  display: grid;
  grid-template-rows: auto 1fr auto;
  grid-template-columns: minmax(0, 1fr);
  margin-left: 50px;
}
.site-footer {
  /*display: flex;*/
  align-items: center;
  justify-content: center;
  border-top: 1px solid var(--color--black);
  min-height: 100px;
  background: #222C3C;

  color: white;
  font-size: 14px;
  text-align: center;
}

/*
footer {
            text-align: center;
            /*padding: 20px;
           /* margin-top: -20px;
            /* Remove the margin-left property 
            font-size: 14px;
            color: #fff;
            
        
            width: 100%; /* Make it full width 
           z-index: 1010; /* Higher than sidebar's z-index (1000) 


           background-color: #252836;
            color: #888;
            padding: 15px 20px;
            font-size: 12px;
            text-align: center;

         Horizontal container 

position: relative;
height: 52.09px;

top:auto;


        }
        
        */

        

        footer a {
            color: #4bc0c0;
            text-decoration: none;
        }
        
         /* Additional Responsive Styles */
@media screen and (max-width: 1024px) {
  .top-row, .metrics-row {
    grid-template-columns: 1fr 1fr;
  }
  
  .survey-card {
    grid-column: span 2;
  }
}

@media screen and (max-width: 768px) {
  .top-row, .metrics-row {
    grid-template-columns: 1fr;
  }
  
  .survey-card {
    grid-column: span 1;
  }
}



/* Fix footer to ensure it's always at the bottom */
footer {
    background: #222C3C;

    color: #888;
    padding: 15px 20px;
    font-size: 12px;
    text-align: center;
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 52px;
    z-index: 1010;
}

/* Mobile specific adjustments for sidebar and footer */
@media screen and (max-width: 768px) {
   
    
    /* Fix footer */
    footer {
        position: fixed;
        bottom: 0;
        width: 100%;
        z-index: 1010;
    }
    
    /* Create space at the bottom of the content to prevent overlap with footer */
    .dashboard-container {
        padding-bottom: 60px;
    }
    
    /* Adjust breadcrumb positioning */
    .breadcrumb {
        left: auto;
        right: auto;
        position: sticky;
        transform: none;
        width: 100%;
        margin-bottom: 15px;
    }
    
    
}

@media screen and (min-height: 900px) {
    .sidebar {
        height: calc(100vh - 52px);
    }
}

/* For short screens, make sure content is scrollable */
@media screen and (max-height: 600px) {
    .sidebar {
        height: calc(100vh - 2px);
        overflow-y: auto;
    }
    
    .main-content {
        padding-bottom: 70px;
        /*margin-left: 160px;*/
    }
}

/* When printing or when footer should be part of normal flow for very long pages */
@media print, screen and (min-height: 1200px) {
    .sidebar {
        height: calc(100% - 2px);
    }
    
    footer {
        position: relative;
        margin-top: 20px;
    }
    
    .main-content {
        min-height: calc(100vh - 130px);
    }
}

    </style>
</head>
<body>
    <div class="container site">
        <div class="sidebar">
            <!-- Sidebar content would go here -->
             <!-- Sidebar -->
<aside class="sidebar">
    <div style=" background: #5368f5;" class="logo">
        <div style= "  background-color: #5368f5;  width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; border-radius: 8px; color: white; font-weight: bold;"><svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M30.8275 8.02693C28.4349 8.09529 26.5209 10.0094 26.5209 12.3336C26.4525 13.9742 27.3412 15.4781 28.7084 16.2301V23.8863C28.7084 27.8512 25.222 30.9957 21.0521 30.9957C16.9506 30.9957 13.5326 27.9879 13.3959 24.2281C18.3861 23.2027 22.1459 18.8277 22.1459 13.4957V2.89998C22.1459 2.14803 21.5306 1.46443 20.7787 1.32771L16.472 0.439041C15.5834 0.233963 14.7631 0.849197 14.558 1.73787L14.3529 2.76326C14.1478 3.65193 14.7631 4.5406 15.6517 4.74568L17.7025 5.15584V13.4273C17.7025 17.0504 14.8314 20.0582 11.2084 20.0582C7.58533 20.1265 4.57751 17.1871 4.57751 13.4957V5.15584L6.69666 4.74568C7.58533 4.5406 8.20056 3.72029 7.99548 2.83162L7.79041 1.73787C7.58533 0.849197 6.76501 0.233963 5.87634 0.439041L1.5697 1.25935C0.817749 1.46443 0.270874 2.14803 0.270874 2.89998V13.4957C0.270874 18.8277 4.03064 23.2027 9.02087 24.2281C9.15759 30.4488 14.4896 35.3707 21.0521 35.3707C27.683 35.3707 33.0834 30.2437 33.0834 23.8863V16.2301C34.3822 15.4781 35.2709 14.0426 35.2709 12.4019C35.2709 10.0094 33.2201 8.02693 30.8275 8.02693ZM30.8959 13.4957C30.2806 13.4957 29.8021 13.0172 29.8021 12.4019C29.8021 11.8551 30.2806 11.3082 30.8959 11.3082C31.4427 11.3082 31.9896 11.8551 31.9896 12.4019C31.9896 13.0172 31.4427 13.4957 30.8959 13.4957Z" fill="white"/>
            </svg>
            </div>
        <span>Medical</span>
    </div>
    
    <div class="user-profile-sidebar">
        <div class="avatar">
            <img src="https://ssm.swiss/wp-content/uploads/2023/02/school-template-headmaster-img.jpg" alt="Dr. Kiran Patel">
        </div>
        <div class="user-info">
            <h3>Dr. Kiran Patel</h3>
            <p>Administrator</p>
        </div>
    </div>
    
    <div class="sidebar-menu">
        <div style="background-color: white;" class="menu-item active grid-con">
            <i class="fas fa-th-large"></i>
            <span style="width:100px; padding-left: 12px;">Dashboard</span>
        </div>
        
        <div class="menu-item  grid-con">
            <i class="fas fa-envelope"></i>
            <span style="width:100px; padding-left: 12px;">Email</span>
            <div class="badge-count">5</div>
        </div>
        
        <div class="menu-item  grid-con">
            <i class="fas fa-calendar"></i>
            <span style="width:100px; padding-left: 12px;">Calendar</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-calendar-check"></i>
            <span style="width:100px; padding-left: 12px;">Appointment</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-user-md"></i>
            <span style="width:100px; padding-left: 12px;">Doctors</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-users"></i>
            <span style="width:100px; padding-left: 12px;">Other Staff</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-procedures"></i>
            <span>Patients</span>
        </div>
        
        <div class="menu-item  grid-con">
            <i class="fas fa-door-open"></i>
            <span style="width:140px; padding-left: 12px;">Room Allotment</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-credit-card"></i>
            <span style="width:100px; padding-left: 12px;">Payments</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-cog"></i>
            <span style="width:100px; padding-left: 12px;">Widget</span>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-puzzle-piece"></i>
            <span style="width:100px; padding-left: 12px;">UI Elements</span>
            <div class="badge-count">10</div>
        </div>
        
        <div class="menu-item grid-con">
            <i class="fas fa-layer-group"></i>
            <span style="width:140px; padding-left: 12px;">Material Elements</span>
        </div>
    </div>
</aside>

<!-- Header -->
<header>
    <div class="search-bar">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Search...">
    </div>
    
    <div class="user-menu">
        <div class="language-selector">
            <span style="padding-right: 7px;">English</span>
          <!--  <i class="fas fa-chevron-down"></i>-->
        </div>
        
        <div class="notifications badge" data-count="2">
            <i class="fas fa-bell"></i>
        </div>
        
        <div class="messages badge" data-count="2">
            <i class="fas fa-envelope"></i>
        </div>
        
        <div class="user-profile">
            <img src="https://ssm.swiss/wp-content/uploads/2023/02/school-template-headmaster-img.jpg" alt="User" style="width: 32px; height: 32px; border-radius: 50%;  ">
            <span style="display: grid; padding-right: 7px; padding-left: 7px;">Kiran</span>
         <!--   <i class="fas fa-chevron-down grid-con"></i>-->
        </div>
    </div>
        </div>
        
        <div class="main-content">
            <div class="header">
                <h1>Dashboard</h1>
                <div class="breadcrumb">
                    <a href="#">
                        Home</a>
                    <span> < </span>
                    <a href="#">Dashboard</a>
                </div>
            </div>

            <div class="dashboard-container">
            
                <div class="top-row">
                    <!--<div class="stats-card card2 cards-container small-card">
                        <h3>New Patients</h3>
                        <div class="number" style="color: #2e9e5b;">125</div>
                        <div class="progress-bar">
                            <div class="progress green" style="width: 65%;"></div>
                        </div>
                        <div class="chart-container">
                            <canvas id="newPatientsChart"></canvas>
                        </div>
                    </div>
                    <div class="stats-card card2 cards-container small-card">
                        <div class="card-header">
                            <h3>New Patients</h3>
                            <button id="refreshBtn" class="refresh-btn" onclick="refreshDataFromGoogleSheets()" title="Refresh data from Google Sheets">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div class="number" style="color: #2e9e5b;" id="totalPatientsCount">Loading...</div>
                        <div class="progress-bar">
                            <div class="progress green" id="newPatientsProgress" style="width: 0%;"></div>
                        </div>
                        <div class="chart-container">
                            <canvas id="newPatientsChart"></canvas>
                        </div>
                        <div class="chart-legend">
                            <div class="legend-item">
                                <span class="legend-color" style="background-color: #36a2eb;"></span>
                                <span class="legend-text">     </span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background-color: #6c5ce7;"></span>
                                <span class="legend-text">Existing Patients</span>
                            </div>
                        </div>
                    </div>-->
                    <div style="width:240px; margin-bottom: -6px;" class="stats-card card small-card">
                        <h3>New Patients</h3>
                        <div class="number loading" id="newPatientsNumber">Loading...</div>
                        <div class="progress-bar">
                            <div class="progress green" id="newPatientsProgress" style="width: 0%;"></div>
                        </div>
                        <div class="chart-container">
                            <canvas id="newPatientsChart"></canvas>
                        </div>
                    </div>
                    <div style="width:240px; margin-bottom: -6px;" class="stats-card card small-card">
                        <h3>OPD Patients</h3>
                        <div class="number loading" id="opdPatientsNumber">Loading...</div>
                        <div class="progress-bar">
                            <div class="progress pink" id="opdPatientsProgress" style="width: 0%;"></div>
                        </div>
                        <div class="chart-container">
                            <canvas id="opdPatientsChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="stats-card card survey-card">
                        <div class="card-header">
                            <h3>HOSPITAL SURVEY</h3>
                            <div class="controls">
                                <button class="control-button">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <button class="control-button">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div style="position: relative; width: 100%; height: 80%;">
                            <canvas id="hospitalSurveyChart"></canvas>
                        </div>
                    </div>
                    
                    <div  style="width:240px;" class="stats-card card small-card">
                        <h3>Today's Operations</h3>
                        <div class="number loading" id="operationsNumber">Loading...</div>
                        <div class="progress-bar">
                            <div class="progress green" id="operationsProgress" style="width: 0%;"></div>
                        </div>
                        <div class="chart-container">
                            <canvas id="operationsChart"></canvas>
                        </div>
                    </div>
                    
                    <div  style="width:240px;"class="stats-card card small-card">
                        <h3>Visitors</h3>
                        <div class="number loading" id="visitorsNumber">Loading...</div>
                        <div class="progress-bar">
                            <div class="progress orange" id="visitorsProgress" style="width: 0%;"></div>
                        </div>
                        <div class="chart-container">
                            <canvas id="visitorsChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="metrics-row">
                    <div class="card metric-card">
                        <h3>
                            New Patient
                            <span class="growth-tag positive" id="newPatientGrowth">Loading...</span>
                        </h3>
                        <div class="stats-tabs">
                            <div class="stats-tab">
                                <p>Overall Growth</p>
                                <p id="overallGrowth1">Loading...</p>
                            </div>
                            <div class="stats-tab">
                                <p>Monthly</p>
                                <p id="monthlyGrowth1">Loading...</p>
                            </div>
                            <div class="stats-tab">
                                <p>Day</p>
                                <p id="dayGrowth1">Loading...</p>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="newPatientChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card metric-card">
                        <h3>
                            Heart Surgeries
                            <span class="growth-tag negative" id="heartSurgeriesGrowth">Loading...</span>
                        </h3>
                        <div class="stats-tabs">
                            <div class="stats-tab">
                                <p>Overall Growth</p>
                                <p id="overallGrowth2">Loading...</p>
                            </div>
                            <div class="stats-tab">
                                <p>Monthly</p>
                                <p id="monthlyGrowth2">Loading...</p>
                            </div>
                            <div class="stats-tab">
                                <p>Day</p>
                                <p id="dayGrowth2">Loading...</p>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="heartSurgeriesChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card metric-card">
                        <h3>
                            Medical Treatment
                            <span class="growth-tag positive" id="medicalTreatmentGrowth">Loading...</span>
                        </h3>
                        <div class="stats-tabs">
                            <div class="stats-tab">
                                <p>Overall Growth</p>
                                <p id="overallGrowth3">Loading...</p>
                            </div>
                            <div class="stats-tab">
                                <p>Monthly</p>
                                <p id="monthlyGrowth3">Loading...</p>
                            </div>
                            <div class="stats-tab">
                                <p>Day</p>
                                <p id="dayGrowth3">Loading...</p>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="medicalTreatmentChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="card1 table-card">
                  <!-- Patient List Table -->
                        <div class="patient-table">
                            <div class="table-header">
                                <div class="table-title">ADMIT PATIENT LIST</div>
                                <div class="table-controls">
                                    <button class="chart-btn">📊</button>
                                    <button class="chart-btn">📈</button>
                                    <button class="chart-btn">❌</button>
                                </div>
                            </div>
                            <div id="loading" class="loading">Loading patient data...</div>
                            <table id="patient-table" style="display: none;">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>Name</th>
                                        <th>Assigned Doctor</th>
                                        <th>Date Of Admit</th>
                                        <th>Diseases</th>
                                        <th>Room No</th>
                                        <th>Edit</th>
                                    </tr>
                                </thead>
                                <tbody id="patient-tbody">
                                    <!-- Data will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div> 
                         
                </div>
            </div>
        </div>
    </div>

    
    <footer>
        <div class="site-footer">
            2021 © RadiStar Hospital Template By Rediaxtheme
        </div>
    </footer>

    <script>
        // Helper function to create gradient
        function createGradient(ctx, colorStart, colorEnd) {
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, colorStart);
            gradient.addColorStop(1, colorEnd);
            return gradient;
        }

        

        
        
       // Hospital Dashboard JavaScript






       // Hospital Dashboard JavaScript
// This code connects the HTML frontend with the Flask backend
        // This code connects the HTML frontend with the Flask backend

// Configuration
const API_BASE_URL = 'http://localhost:5000/api';

// Global variables
let chartsInstances = {};
let patientsData = [];

// Initialize dashboard when page loads
document.addEventListener('DOMContentLoaded', function() {
    console.log('Hospital Dashboard initializing...');
    initializeDashboard();
    
    // Initialize table scrolling
    initializeTableScrolling();
});

// Initialize table scrolling functionality
function initializeTableScrolling() {
    const tableContainer = document.querySelector('.table-container') || document.querySelector('#patient-table')?.parentElement;
    
    if (tableContainer) {
        // Add scroll styles to the table container
        tableContainer.style.maxHeight = '680px';
        tableContainer.style.maxWidth = '1580px'; // Adjust height as needed
        tableContainer.style.overflowY = 'auto';
        tableContainer.style.overflowX = 'auto';
        tableContainer.style.border = '1px solid #ddd';
        tableContainer.style.borderRadius = '5px';
        
        // Add custom scrollbar styles
        const style = document.createElement('style');
        style.textContent = `
            .table-container::-webkit-scrollbar {
                width: 8px;
            }
            
            .table-container::-webkit-scrollbar-track {
                background: #f1f1f1;
                border-radius: 5px;
            }
            
            .table-container::-webkit-scrollbar-thumb {
                background: #888;
                border-radius: 5px;
            }
            
            .table-container::-webkit-scrollbar-thumb:hover {
                background: #555;
            }
            
            /* Sticky header for better UX */
            .patient-table thead th {
                position: sticky;
                top: 0;
                background-color: #f8f9fa;
                z-index: 10;
                box-shadow: 0 2px 2px -1px rgba(0, 0, 0, 0.4);
            }
            
            /* Ensure table takes full width */
            .patient-table {
                width: 100%;
                border-collapse: collapse;
            }
            
            /* Add subtle row hover effect */
            .patient-table tbody tr:hover {
                background-color: #f5f5f5;
            }
        `;
        document.head.appendChild(style);
    }
}

// Main initialization function
async function initializeDashboard() {
    try {
        // Show loading states
        showLoadingStates();
        
        // Load all data concurrently
        await Promise.all([
            loadDashboardStats(),
            loadGrowthMetrics(),
            loadPatientsData(),
            loadAllCharts()
        ]);
        
        console.log('Dashboard initialized successfully');
    } catch (error) {
        console.error('Error initializing dashboard:', error);
        showErrorMessage('Failed to load dashboard data. Please refresh the page.');
    }
}

// Show loading states for all elements
function showLoadingStates() {
    const loadingElements = document.querySelectorAll('.loading');
    loadingElements.forEach(element => {
        element.style.display = 'block';
        element.textContent = 'Loading...';
    });
}

// Load dashboard statistics
async function loadDashboardStats() {
    try {
        const response = await fetch(`${API_BASE_URL}/dashboard-stats`);
        if (!response.ok) throw new Error('Failed to load dashboard stats');
        
        const stats = await response.json();
        updateDashboardStats(stats);
    } catch (error) {
        console.error('Error loading dashboard stats:', error);
    }
}

// Update dashboard statistics in UI
function updateDashboardStats(stats) {
    // Update New Patients
    if (stats.newPatients) {
        updateStatCard('newPatients', stats.newPatients);
    }
    
    // Update OPD Patients
    if (stats.opdPatients) {
        updateStatCard('opdPatients', stats.opdPatients);
    }
    
    // Update Operations
    if (stats.operations) {
        updateStatCard('operations', stats.operations);
    }
    
    // Update Visitors
    if (stats.visitors) {
        updateStatCard('visitors', stats.visitors);
    }
}

// Update individual stat card
function updateStatCard(cardName, data) {
    const numberElement = document.getElementById(`${cardName}Number`);
    const progressElement = document.getElementById(`${cardName}Progress`);
    
    if (numberElement) {
        numberElement.textContent = data.value;
        numberElement.classList.remove('loading');
    }
    
    if (progressElement) {
        progressElement.style.width = `${data.progress}%`;
        progressElement.style.backgroundColor = data.color;
    }
}

// Load growth metrics
async function loadGrowthMetrics() {
    try {
        const response = await fetch(`${API_BASE_URL}/growth-metrics`);
        if (!response.ok) throw new Error('Failed to load growth metrics');
        
        const metrics = await response.json();
        updateGrowthMetrics(metrics);
    } catch (error) {
        console.error('Error loading growth metrics:', error);
    }
}

// Update growth metrics in UI
function updateGrowthMetrics(metrics) {
    // Update New Patient metrics
    if (metrics.newPatient) {
        updateMetricCard('newPatient', metrics.newPatient);
    }
    
    // Update Heart Surgeries metrics
    if (metrics.heartSurgeries) {
        updateMetricCard('heartSurgeries', metrics.heartSurgeries);
    }
    
    // Update Medical Treatment metrics
    if (metrics.medicalTreatment) {
        updateMetricCard('medicalTreatment', metrics.medicalTreatment);
    }
}

// Update individual metric card
function updateMetricCard(cardName, data) {
    const growthElement = document.getElementById(`${cardName}Growth`);
    const overallElement = document.getElementById('overallGrowth1');
    const monthlyElement = document.getElementById('monthlyGrowth1');
    const dayElement = document.getElementById('dayGrowth1');
    
    if (growthElement) {
        growthElement.textContent = data.growth_text;
        growthElement.className = `growth-tag ${data.growth_type}`;
    }
    
    // Update growth stats (adjust IDs based on card)
    const cardIndex = cardName === 'newPatient' ? '1' : 
                     cardName === 'heartSurgeries' ? '2' : '3';
    
    const overallEl = document.getElementById(`overallGrowth${cardIndex}`);
    const monthlyEl = document.getElementById(`monthlyGrowth${cardIndex}`);
    const dayEl = document.getElementById(`dayGrowth${cardIndex}`);
    
    if (overallEl) overallEl.textContent = data.overall;
    if (monthlyEl) monthlyEl.textContent = data.monthly;
    if (dayEl) dayEl.textContent = data.day;
}

// Load patients data
async function loadPatientsData() {
    try {
        const response = await fetch(`${API_BASE_URL}/patients`);
        if (!response.ok) throw new Error('Failed to load patients data');
        
        const data = await response.json();
        patientsData = data.patients;
        updatePatientsTable(patientsData);
    } catch (error) {
        console.error('Error loading patients data:', error);
    }
}

// Update patients table with scrolling support
function updatePatientsTable(patients) {
    const loadingElement = document.getElementById('loading');
    const tableElement = document.getElementById('patient-table');
    const tbodyElement = document.getElementById('patient-tbody');
    
    if (loadingElement) {
        loadingElement.style.display = 'none';
    }
    
    if (tableElement) {
        tableElement.style.display = 'table';
        tableElement.classList.add('patient-table'); // Add class for styling
    }
    
    if (tbodyElement) {
        tbodyElement.innerHTML = '';
        
        // Show ALL patients, not just first 10 (scrolling will handle visibility)
        patients.forEach((patient, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${index + 1}</td>
                <td>${patient.name || 'N/A'}</td>
                <td>${patient.doctor || 'N/A'}</td>
                <td>${patient.admitDate}</td>
                <td><span class="disease-tag disease-${getDiseaseClass(patient.disease)}">${patient.disease || 'N/A'}</span></td>
                <td>${patient.roomNo || 'N/A'}</td>
                <td class="action-buttons">
                    <button class="btn-edit" onclick="editPatient(${index})">✏️</button>
                    <button class="btn-delete" onclick="deletePatient(${index})">✗</button>
                </td>
            `;
            tbodyElement.appendChild(row);
        });
    }
    
    // Add pagination info
    addPaginationInfo(patients.length);
}

// Add pagination info below table
function addPaginationInfo(totalRecords) {
    const tableContainer = document.querySelector('.table-container') || document.querySelector('#patient-table')?.parentElement;
    
    if (tableContainer) {
        // Remove existing pagination info
        const existingInfo = tableContainer.querySelector('.pagination-info');
        if (existingInfo) {
            existingInfo.remove();
        }
        
        // Add new pagination info
        const paginationInfo = document.createElement('div');
        paginationInfo.className = 'pagination-info';
        paginationInfo.style.cssText = `
            padding: 10px;
            text-align: center;
            color: #666;
            font-size: 14px;
            background-color: #f8f9fa;
            border-top: 1px solid #ddd;
        `;
        /*paginationInfo.textContent = `Showing ${totalRecords} patients (scroll to view more)`;*/
        
        tableContainer.appendChild(paginationInfo);
    }
}

// Alternative function: Show only first 10 rows with "Load More" button
function updatePatientsTableWithLoadMore(patients) {
    const loadingElement = document.getElementById('loading');
    const tableElement = document.getElementById('patient-table');
    const tbodyElement = document.getElementById('patient-tbody');
    
    if (loadingElement) {
        loadingElement.style.display = 'none';
    }
    
    if (tableElement) {
        tableElement.style.display = 'table';
    }
    
    if (tbodyElement) {
        tbodyElement.innerHTML = '';
        
        // Show only first 10 patients
        const visiblePatients = patients.slice(0, 10);
        
        visiblePatients.forEach((patient, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${index + 1}</td>
                <td>${patient.name || 'N/A'}</td>
                <td>${patient.doctor || 'N/A'}</td>
                <td>${patient.admitDate}</td>
                <td><span class="disease-tag disease-${getDiseaseClass(patient.disease)}">${patient.disease || 'N/A'}</span></td>
                <td>${patient.roomNo || 'N/A'}</td>
                <td class="action-buttons">
                    <button class="btn-edit" onclick="editPatient(${index})">✏️</button>
                    <button class="btn-delete" onclick="deletePatient(${index})">✗</button>
                </td>
            `;
            tbodyElement.appendChild(row);
        });
        
        // Add "Load More" button if there are more patients
        if (patients.length > 10) {
            addLoadMoreButton(patients.length - 10);
        }
    }
}

// Add Load More button
function addLoadMoreButton(remainingCount) {
    const tableContainer = document.querySelector('.table-container') || document.querySelector('#patient-table')?.parentElement;
    
    if (tableContainer) {
        // Remove existing load more button
        const existingBtn = tableContainer.querySelector('.load-more-btn');
        if (existingBtn) {
            existingBtn.remove();
        }
        
        const loadMoreBtn = document.createElement('button');
        loadMoreBtn.className = 'load-more-btn';
        loadMoreBtn.textContent = `Load More (${remainingCount} remaining)`;
        loadMoreBtn.style.cssText = `
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 0 0 5px 5px;
            cursor: pointer;
            font-size: 14px;
        `;
        
        loadMoreBtn.onclick = function() {
            // Switch to full scrolling view
            updatePatientsTable(patientsData);
        };
        
        tableContainer.appendChild(loadMoreBtn);
    }
}

// Helper functions
function formatDate(dateString) {
    if (!dateString) return 'N/A';
    const date = new Date(dateString);
    return date.toLocaleDateString('en-GB');
}

function getDiseaseClass(disease) {
    if (!disease) return 'other';
    const diseaseMap = {
        'influenza': 'influenza',
        'asthma': 'asthma',
        'diabetes': 'diabetes',
        'jaundice': 'jaundice',
        'malaria': 'malaria',
        'typhoid': 'typhoid',
        'hepatitis': 'hepatitis'
    };
    return diseaseMap[disease.toLowerCase()] || 'other';
}

// Sample data for demonstration
const samplePatients = [
    {
        name: "Jena Brinsker",
        doctor: "Dr Kenny Josh",
        admitDate: "2016-05-27",
        disease: "influenza",
        roomNo: "101"
    },
    {
        name: "Mark Hay",
        doctor: "Dr Mark",
        admitDate: "2017-05-26",
        disease: "asthma",
        roomNo: "105"
    },
    {
        name: "Anthony Davie",
        doctor: "Dr Cinnabar",
        admitDate: "2018-05-21",
        disease: "diabetes",
        roomNo: "106"
    },
    {
        name: "David Perry",
        doctor: "Dr Felix",
        admitDate: "2016-04-20",
        disease: "jaundice",
        roomNo: "105"
    },
    {
        name: "Anthony Davie",
        doctor: "Dr Beryl",
        admitDate: "2016-05-24",
        disease: "malaria",
        roomNo: "102"
    },
    {
        name: "Alan Gilchrist",
        doctor: "Dr Joshep",
        admitDate: "2016-05-22",
        disease: "hepatitis",
        roomNo: "103"
    },
    {
        name: "Mark Hay",
        doctor: "Dr Jayesh",
        admitDate: "2016-06-18",
        disease: "typhoid",
        roomNo: "107"
    },
    {
        name: "Sue Woodger",
        doctor: "Dr Sharma",
        admitDate: "2016-05-17",
        disease: "malaria",
        roomNo: "108"
    },
    // Add more sample patients to demonstrate scrolling
    {
        name: "John Smith",
        doctor: "Dr Anderson",
        admitDate: "2016-05-15",
        disease: "diabetes",
        roomNo: "109"
    },
    {
        name: "Sarah Johnson",
        doctor: "Dr Wilson",
        admitDate: "2016-05-14",
        disease: "asthma",
        roomNo: "110"
    },
    {
        name: "Michael Brown",
        doctor: "Dr Davis",
        admitDate: "2016-05-13",
        disease: "influenza",
        roomNo: "111"
    },
    {
        name: "Emily Davis",
        doctor: "Dr Miller",
        admitDate: "2016-05-12",
        disease: "typhoid",
        roomNo: "112"
    }
];

// Fallback to sample data if API fails
function loadSampleData() {
    patientsData = samplePatients;
    updatePatientsTable(patientsData);
    document.getElementById('loading').style.display = 'none';
    document.getElementById('patient-table').style.display = 'table';
}

// Load sample data after 2 seconds if API doesn't respond
setTimeout(() => {
    if (document.getElementById('loading').style.display !== 'none') {
        loadSampleData();
    }
}, 2000);

// Load all charts
async function loadAllCharts() {
    try {
        const response = await fetch(`${API_BASE_URL}/charts/all`);
        if (!response.ok) throw new Error('Failed to load charts data');
        
        const charts = await response.json();
        renderAllCharts(charts);
    } catch (error) {
        console.error('Error loading charts:', error);
    }
}

// Render all charts
function renderAllCharts(chartsData) {
    // Destroy existing charts
    Object.values(chartsInstances).forEach(chart => {
        if (chart) chart.destroy();
    });
    chartsInstances = {};
    
    // Render each chart
    Object.keys(chartsData).forEach(chartName => {
        const canvasId = `${chartName}Chart`;
        const canvas = document.getElementById(canvasId);
        
        if (canvas) {
            const ctx = canvas.getContext('2d');
            chartsInstances[chartName] = new Chart(ctx, chartsData[chartName]);
        }
    });
}

// Create modal dynamically if it doesn't exist
function createModal() {
    let modal = document.getElementById('editModal');
    if (!modal) {
        modal = document.createElement('div');
        modal.id = 'editModal';
        modal.className = 'modal';
        modal.style.cssText = `
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        `;
        document.body.appendChild(modal);
    }
    return modal;
}

// Edit patient function - FIXED
function editPatient(index) {
    const patient = patientsData[index];
    if (!patient) return;

    const modal = createModal();
    
    // Build modal content
    modal.innerHTML = `
        <div class="modal-content" style="
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 400px;
            border-radius: 8px;
        ">
            <span class="close" style="
                color: #aaa;
                float: right;
                font-size: 28px;
                font-weight: bold;
                cursor: pointer;
            ">&times;</span>
            <h2>Edit Patient</h2>
            <form id="editForm" style="
                display: flex;
                flex-direction: column;
                gap: 15px;
            ">
                <input type="text" id="editName" value="${patient.name}" placeholder="Name" required style="
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                " />
                <input type="text" id="editDoctor" value="${patient.doctor}" placeholder="Doctor" required style="
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                " />
                <input type="text" id="editDisease" value="${patient.disease}" placeholder="Disease" required style="
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                " />
                <input type="text" id="editRoomNo" value="${patient.roomNo}" placeholder="Room No" required style="
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                " />
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" id="cancelBtn" style="
                        padding: 10px 20px;
                        background-color: #f44336;
                        color: white;
                        border: none;
                        border-radius: 4px;
                        cursor: pointer;
                    ">Cancel</button>
                    <button type="submit" style="
                        padding: 10px 20px;
                        background-color: #4CAF50;
                        color: white;
                        border: none;
                        border-radius: 4px;
                        cursor: pointer;
                    ">Update</button>
                </div>
            </form>
        </div>
    `;

    // Show modal
    modal.style.display = 'block';

    // Close modal handlers
    const closeBtn = modal.querySelector('.close');
    const cancelBtn = modal.querySelector('#cancelBtn');
    
    closeBtn.onclick = () => modal.style.display = 'none';
    cancelBtn.onclick = () => modal.style.display = 'none';
    
    // Click outside modal to close
    window.onclick = (event) => {
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    };

    // Handle form submission
    const editForm = modal.querySelector('#editForm');
    editForm.onsubmit = async function (e) {
        e.preventDefault();

        const newName = document.getElementById('editName').value.trim();
        const newDoctor = document.getElementById('editDoctor').value.trim();
        const newDisease = document.getElementById('editDisease').value.trim();
        const newRoomNo = document.getElementById('editRoomNo').value.trim();

        if (!newName || !newDoctor || !newDisease || !newRoomNo) {
            showErrorMessage('Please fill in all fields');
            return;
        }

        modal.style.display = 'none';

        await updatePatient(index, {
            name: newName,
            doctor: newDoctor,
            disease: newDisease,
            roomNo: newRoomNo,
            admitDate: patient.admitDate
        });
    };
}

// Update patient function
async function updatePatient(index, updatedData) {
    try {
        const response = await fetch(`${API_BASE_URL}/patients/${index}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(updatedData)
        });

        if (!response.ok) throw new Error('Failed to update patient');

        // Update local data
        patientsData[index] = updatedData;
        updatePatientsTable(patientsData);
        
        showSuccessMessage('Patient updated successfully');
    } catch (error) {
        console.error('Error updating patient:', error);
        showErrorMessage('Failed to update patient');
    }
}

// Delete patient function
async function deletePatient(index) {
    if (!confirm('Are you sure you want to delete this patient?')) return;
    
    try {
        const response = await fetch(`${API_BASE_URL}/patients/${index}`, {
            method: 'DELETE'
        });
        
        if (!response.ok) throw new Error('Failed to delete patient');
        
        // Remove from local data
        patientsData.splice(index, 1);
        updatePatientsTable(patientsData);
        
        showSuccessMessage('Patient deleted successfully');
    } catch (error) {
        console.error('Error deleting patient:', error);
        showErrorMessage('Failed to delete patient');
    }
}

// Utility functions
function showSuccessMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-success';
    alertDiv.textContent = message;
    alertDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: #4CAF50;
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    `;
    
    document.body.appendChild(alertDiv);
    
    setTimeout(() => {
        if (document.body.contains(alertDiv)) {
            document.body.removeChild(alertDiv);
        }
    }, 3000);
}

function showErrorMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-error';
    alertDiv.textContent = message;
    alertDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: #f44336;
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    `;
    
    document.body.appendChild(alertDiv);
    
    setTimeout(() => {
        if (document.body.contains(alertDiv)) {
            document.body.removeChild(alertDiv);
        }
    }, 3000);
}

// Refresh data function
async function refreshData() {
    try {
        const response = await fetch(`${API_BASE_URL}/refresh-data`, {
            method: 'POST'
        });
        
        if (!response.ok) throw new Error('Failed to refresh data');
        
        // Reload all data
        await initializeDashboard();
        showSuccessMessage('Data refreshed successfully');
    } catch (error) {
        console.error('Error refreshing data:', error);
        showErrorMessage('Failed to refresh data');
    }
}

// Export data function
async function exportData() {
    try {
        const response = await fetch(`${API_BASE_URL}/export-csv`);
        if (!response.ok) throw new Error('Failed to export data');
        
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'patients_export.csv';
        a.click();
        window.URL.revokeObjectURL(url);
        
        showSuccessMessage('Data exported successfully');
    } catch (error) {
        console.error('Error exporting data:', error);
        showErrorMessage('Failed to export data');
    }
}

// Add event listeners for buttons
document.addEventListener('DOMContentLoaded', function() {
    // Add refresh button if it exists
    const refreshBtn = document.getElementById('refresh-btn');
    if (refreshBtn) {
        refreshBtn.addEventListener('click', refreshData);
    }
    
    // Add export button if it exists
    const exportBtn = document.getElementById('export-btn');
    if (exportBtn) {
        exportBtn.addEventListener('click', exportData);
    }
});

// Chart.js configuration defaults
if (typeof Chart !== 'undefined') {
    Chart.defaults.font.family = 'Arial, sans-serif';
    Chart.defaults.font.size = 12;
    Chart.defaults.plugins.legend.display = true;
    Chart.defaults.plugins.tooltip.enabled = true;
}

// Auto-refresh data every 5 minutes
setInterval(async () => {
    console.log('Auto-refreshing data...');
    await initializeDashboard();
}, 300000); // 5 minutes

console.log('Hospital Dashboard JavaScript loaded successfully');
    </script>
</body>
</html>
